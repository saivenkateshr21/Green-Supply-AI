<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenSupply AI â€” Real-Time Smart Supply Chain Monitor</title>
    <meta name="description"
        content="Real-time AI-powered logistics intelligence platform for smart supply chain monitoring">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics-compat.js"></script>
    <style>
        /* Auth Loader */
        .auth-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: #060d06;
            gap: 20px;
        }

        .auth-loader-logo {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            background: linear-gradient(135deg, #2bc812, #3cf91a);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: #060d06;
            font-family: 'Space Grotesk', sans-serif;
            animation: pulse-loader 1.5s ease-in-out infinite;
        }

        @keyframes pulse-loader {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 20px rgba(60, 249, 26, 0.2);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 40px rgba(60, 249, 26, 0.4);
            }
        }

        .auth-loader-text {
            color: #5a6b55;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
        }

        .auth-loader .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #1e2e1e;
            border-top-color: #3cf91a;
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>

    <!-- Auth Loading Screen -->
    <div class="auth-loader" id="auth-loader">
        <div class="auth-loader-logo">G</div>
        <div class="spinner"></div>
        <div class="auth-loader-text">Authenticating...</div>
    </div>

    <div class="app-layout" style="display:none">
        <!-- â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â• -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <h1><span class="brand-icon">G</span> GreenSupply AI</h1>
                <div class="brand-subtitle">Enterprise Logistics v4.2</div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-page="dashboard" id="nav-dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                    Dashboard
                </button>
                <button class="nav-item" data-page="tracking" id="nav-tracking">
                    <span class="material-symbols-outlined">map</span>
                    Live Tracking
                </button>
                <button class="nav-item" data-page="alerts" id="nav-alerts">
                    <span class="material-symbols-outlined">notifications_active</span>
                    Alerts
                    <span class="nav-badge" id="alert-count-badge">0</span>
                </button>
                <button class="nav-item" data-page="analytics" id="nav-analytics">
                    <span class="material-symbols-outlined">bar_chart</span>
                    Analytics
                </button>
                <button class="nav-item" data-page="ai-assistant" id="nav-ai">
                    <span class="material-symbols-outlined">smart_toy</span>
                    AI Assistant
                </button>
                <button class="nav-item" data-page="settings" id="nav-settings">
                    <span class="material-symbols-outlined">settings</span>
                    Settings
                </button>
            </nav>

            <div class="sidebar-user">
                <div class="user-avatar">--</div>
                <div class="user-info">
                    <div class="user-name">Loading...</div>
                    <div class="user-role">Fleet Manager</div>
                </div>
                <button class="nav-item"
                    style="margin-top:8px;padding:8px 12px;font-size:0.78rem;color:#ef4444;border-color:rgba(239,68,68,0.2)"
                    onclick="signOut()" title="Sign Out">
                    <span class="material-symbols-outlined" style="font-size:18px">logout</span>
                    Sign Out
                </button>
            </div>
        </aside>

        <!-- â•â•â•â•â•â•â•â•â•â•â• MAIN CONTENT â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="main-content">
            <!-- â”€â”€ Top Header â”€â”€ -->
            <header class="top-header">
                <div class="header-left">
                    <h2 class="header-title" id="page-title">Dashboard</h2>
                    <div class="live-indicator">
                        <span class="live-dot"></span>
                        LIVE STREAMING
                    </div>
                    <div class="connection-status disconnected" id="ws-status">
                        <span class="status-dot"></span>
                        <span id="ws-status-text">Connecting...</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-search">
                        <span class="material-symbols-outlined">search</span>
                        <input type="text" placeholder="Search trucks, alerts..." id="global-search">
                    </div>
                    <button class="header-btn" id="btn-notifications" title="Notifications">
                        <span class="material-symbols-outlined">notifications</span>
                        <span class="notif-dot"></span>
                    </button>
                    <button class="header-btn" id="btn-fullscreen" title="Fullscreen">
                        <span class="material-symbols-outlined">fullscreen</span>
                    </button>
                    <button class="header-btn" id="btn-signout" title="Sign Out" onclick="signOut()">
                        <span class="material-symbols-outlined">logout</span>
                    </button>
                </div>
            </header>

            <!-- â”€â”€ Page Container â”€â”€ -->
            <div class="page-container">

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 1: DASHBOARD
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page active" id="page-dashboard">
                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card green">
                            <div class="kpi-label">Active Trucks</div>
                            <div class="kpi-value" id="kpi-trucks">0</div>
                            <div class="kpi-icon"><span class="material-symbols-outlined">local_shipping</span></div>
                        </div>
                        <div class="kpi-card blue">
                            <div class="kpi-label">On-Time Delivery</div>
                            <div class="kpi-value"><span id="kpi-ontime">0</span><span class="kpi-suffix">%</span></div>
                            <div class="kpi-icon"><span class="material-symbols-outlined">check_circle</span></div>
                        </div>
                        <div class="kpi-card yellow">
                            <div class="kpi-label">Delayed</div>
                            <div class="kpi-value" id="kpi-delayed">0</div>
                            <div class="kpi-icon"><span class="material-symbols-outlined">schedule</span></div>
                        </div>
                        <div class="kpi-card red">
                            <div class="kpi-label">High Risk Shipments</div>
                            <div class="kpi-value" id="kpi-highrisk">0</div>
                            <div class="kpi-icon"><span class="material-symbols-outlined">warning</span></div>
                        </div>
                    </div>

                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid">
                        <div class="dashboard-col">
                            <!-- Map Card -->
                            <div class="card">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">map</span> Fleet Overview Map</h3>
                                    <span class="card-badge badge-low" id="fleet-status-badge">LIVE</span>
                                </div>
                                <div class="map-container">
                                    <div id="dashboard-map"></div>
                                    <div class="map-overlay">
                                        <strong id="map-truck-label">5 trucks active</strong>
                                    </div>
                                </div>
                            </div>

                            <!-- Charts Row -->
                            <div class="dashboard-row-2">
                                <div class="card">
                                    <div class="card-header">
                                        <h3><span class="material-symbols-outlined">trending_up</span> ETA Accuracy
                                            Trend</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-area"><canvas id="chart-eta"></canvas></div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        <h3><span class="material-symbols-outlined">speed</span> Average Fleet Speed
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="speed-display">
                                            <div class="speed-item">
                                                <div class="speed-value" id="speed-urban">0<span
                                                        class="speed-unit">mph</span></div>
                                                <div class="speed-label-text">Urban Routes</div>
                                            </div>
                                            <div class="speed-item">
                                                <div class="speed-value" id="speed-interstate">0<span
                                                        class="speed-unit">mph</span></div>
                                                <div class="speed-label-text">Interstate</div>
                                            </div>
                                        </div>
                                        <div class="chart-area" style="height:130px;margin-top:12px"><canvas
                                                id="chart-speed"></canvas></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="dashboard-col">
                            <!-- Risk Index -->
                            <div class="card">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">shield</span> Supply Chain Risk Index
                                    </h3>
                                    <span class="card-badge" id="risk-badge">LOW</span>
                                </div>
                                <div class="card-body">
                                    <div class="risk-gauge">
                                        <div class="risk-circle" id="risk-circle">
                                            <div class="risk-score" id="risk-score-value">0</div>
                                            <div class="risk-label">RISK SCORE</div>
                                        </div>
                                        <div class="risk-level" id="risk-level-text">Overall Risk Level: LOW</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Real-time Alerts -->
                            <div class="card" style="flex:1">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">notifications_active</span> Real-time
                                        Alerts</h3>
                                    <span class="card-badge badge-critical" id="alerts-count-label">0 new</span>
                                </div>
                                <div class="alerts-scroll" id="dashboard-alerts">
                                    <div class="alert-item">
                                        <div class="alert-severity info"></div>
                                        <div class="alert-content">
                                            <div class="alert-title">Waiting for data...</div>
                                            <div class="alert-message">Real-time alerts will appear here once the
                                                streaming engine connects.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 2: LIVE TRACKING
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page" id="page-tracking">
                    <div class="tracking-layout">
                        <!-- Fleet List -->
                        <div class="card fleet-list" id="fleet-list-panel">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">local_shipping</span> Fleet List</h3>
                            </div>
                            <div id="fleet-list-items">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Map -->
                        <div class="card tracking-map-area">
                            <div id="tracking-map" style="width:100%;height:100%;"></div>
                        </div>

                        <!-- Truck Detail -->
                        <div class="card truck-detail-panel" id="truck-detail-panel">
                            <div class="card-header">
                                <h3 id="detail-truck-title"><span
                                        class="material-symbols-outlined">local_shipping</span> Select a truck</h3>
                            </div>
                            <div id="truck-detail-content">
                                <div class="detail-section">
                                    <h4>Vehicle Metrics</h4>
                                    <div class="detail-metric">
                                        <span class="metric-label">Speed</span>
                                        <span class="metric-value" id="detail-speed">-- mph</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill green" id="detail-speed-bar" style="width:0%"></div>
                                    </div>

                                    <div class="detail-metric" style="margin-top:14px">
                                        <span class="metric-label">Fuel Level</span>
                                        <span class="metric-value" id="detail-fuel">--%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill blue" id="detail-fuel-bar" style="width:0%"></div>
                                    </div>

                                    <div class="detail-metric" style="margin-top:14px">
                                        <span class="metric-label">Trailer Temp</span>
                                        <span class="metric-value" id="detail-temp">--Â°F</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill cyan" id="detail-temp-bar" style="width:0%"></div>
                                    </div>

                                    <div class="detail-metric" style="margin-top:14px">
                                        <span class="metric-label">Engine Load</span>
                                        <span class="metric-value" id="detail-engine">--%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill yellow" id="detail-engine-bar" style="width:0%"></div>
                                    </div>
                                </div>

                                <div class="detail-section">
                                    <h4>Driver Information</h4>
                                    <div class="driver-card">
                                        <div class="driver-avatar" id="detail-driver-avatar">--</div>
                                        <div>
                                            <div style="font-weight:600;font-size:0.9rem" id="detail-driver-name">--
                                            </div>
                                            <div style="font-size:0.75rem;color:var(--text-muted)"
                                                id="detail-driver-license">License: --</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="detail-section">
                                    <h4>Route Info</h4>
                                    <div class="detail-metric">
                                        <span class="metric-label">Route</span>
                                        <span class="metric-value" id="detail-route">-- â†’ --</span>
                                    </div>
                                    <div class="detail-metric">
                                        <span class="metric-label">Remaining</span>
                                        <span class="metric-value" id="detail-remaining">-- mi</span>
                                    </div>
                                    <div class="detail-metric">
                                        <span class="metric-label">ETA</span>
                                        <span class="metric-value" id="detail-eta">-- min</span>
                                    </div>
                                    <div class="detail-metric">
                                        <span class="metric-label">Risk Level</span>
                                        <span class="metric-value" id="detail-risk">--</span>
                                    </div>
                                </div>

                                <div class="detail-section">
                                    <h4><span class="material-symbols-outlined"
                                            style="font-size:16px;vertical-align:middle;color:var(--accent)">smart_toy</span>
                                        AI Network Insights</h4>
                                    <div id="detail-ai-insight"
                                        style="font-size:0.82rem;color:var(--text-secondary);line-height:1.5;padding:10px;background:var(--bg-surface);border-radius:var(--radius-sm)">
                                        Select a truck to see AI-powered insights.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 3: ALERTS
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page" id="page-alerts">
                    <div class="alerts-page-header">
                        <h2>Real-Time Alerts</h2>
                        <p>Monitoring <span id="alerts-vehicle-count">0</span> active vehicles across <span
                                id="alerts-region-count">12</span> regions</p>
                    </div>
                    <div class="alerts-grid" id="alerts-full-list">
                        <div class="alert-card-full info">
                            <div class="alert-card-header">
                                <div class="alert-card-title">
                                    <span class="material-symbols-outlined">info</span>
                                    Waiting for streaming data...
                                </div>
                                <span class="card-badge badge-low">INFO</span>
                            </div>
                            <div class="alert-card-body">
                                Alerts will appear here in real-time as the streaming engine detects anomalies,
                                temperature spikes, route deviations, and delivery delays.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 4: ANALYTICS
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page" id="page-analytics">
                    <div class="analytics-grid">
                        <div class="card full-width">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">trending_up</span> ETA Accuracy Over Time
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-area" style="height:280px"><canvas id="chart-eta-full"></canvas></div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">shield</span> Risk Score Trend</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-area" style="height:220px"><canvas id="chart-risk-trend"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">speed</span> Speed Trends</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-area" style="height:220px"><canvas id="chart-speed-trend"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">local_shipping</span> Fleet Performance</h3>
                            </div>
                            <div class="card-body">
                                <div class="stat-row">
                                    <span class="stat-label">Total Active Trucks</span>
                                    <span class="stat-value" id="stat-total-trucks">0</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">On-Time Rate</span>
                                    <span class="stat-value" id="stat-ontime-rate">0%</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Average Speed</span>
                                    <span class="stat-value" id="stat-avg-speed">0 mph</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">High Risk Count</span>
                                    <span class="stat-value" id="stat-high-risk">0</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Total Alerts Today</span>
                                    <span class="stat-value" id="stat-total-alerts">0</span>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">thermostat</span> Temperature Compliance
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-area" style="height:220px"><canvas
                                        id="chart-temp-compliance"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 5: AI ASSISTANT
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page" id="page-ai-assistant">
                    <div class="ai-layout">
                        <div class="card ai-chat-panel">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">smart_toy</span> AI Operations Intelligence
                                </h3>
                                <span class="card-badge badge-low" id="ai-source-badge">READY</span>
                            </div>

                            <div class="ai-chat-messages" id="ai-chat-messages">
                                <div class="chat-message assistant">
                                    <div class="chat-bubble">
                                        <p>ðŸ‘‹ Hello! I'm your <strong>GreenSupply AI Assistant</strong>.</p>
                                        <p>I have access to live fleet data and can help you with:</p>
                                        <p>â€¢ Truck status and ETA predictions<br>
                                            â€¢ Delay explanations and risk assessments<br>
                                            â€¢ Alert analysis and fleet summaries<br>
                                            â€¢ Route optimization insights</p>
                                        <p>Ask me anything about your fleet operations!</p>
                                    </div>
                                    <div class="chat-time">Just now</div>
                                </div>
                            </div>

                            <div class="ai-suggestions" id="ai-suggestions">
                                <button class="ai-suggestion-btn" onclick="askSuggestion(this)">Fleet overview</button>
                                <button class="ai-suggestion-btn" onclick="askSuggestion(this)">Which trucks are
                                    delayed?</button>
                                <button class="ai-suggestion-btn" onclick="askSuggestion(this)">Current risk
                                    level?</button>
                                <button class="ai-suggestion-btn" onclick="askSuggestion(this)">Status of T-102</button>
                                <button class="ai-suggestion-btn" onclick="askSuggestion(this)">Show recent
                                    alerts</button>
                            </div>

                            <div class="ai-chat-input">
                                <input type="text" id="ai-input" placeholder="Ask about your fleet operations..."
                                    autocomplete="off">
                                <button id="ai-send-btn" onclick="sendAIMessage()">
                                    <span class="material-symbols-outlined">send</span>
                                    Send
                                </button>
                            </div>
                        </div>

                        <div class="ai-sidebar">
                            <!-- Token Usage -->
                            <div class="card">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">token</span> Token Usage</h3>
                                </div>
                                <div class="card-body">
                                    <div class="token-bar">
                                        <div class="token-info">
                                            <span id="token-used">0</span>
                                            <span id="token-max">10,000 req</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill green" id="token-bar-fill" style="width:0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Knowledge Base -->
                            <div class="card">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">menu_book</span> Knowledge Base</h3>
                                </div>
                                <div class="card-body">
                                    <div class="kb-item"
                                        onclick="askSuggestion({textContent:'Tell me about deviation protocols'})">
                                        <span class="material-symbols-outlined">description</span>
                                        <div>
                                            <div class="kb-title">Deviation Protocol v2.1</div>
                                            <div class="kb-desc">Standard operating procedure for unauthorized route
                                                changes.</div>
                                        </div>
                                    </div>
                                    <div class="kb-item"
                                        onclick="askSuggestion({textContent:'Weather impact analysis for Nevada I-15 corridor'})">
                                        <span class="material-symbols-outlined">cloud</span>
                                        <div>
                                            <div class="kb-title">Weather Patterns: Nevada</div>
                                            <div class="kb-desc">Current seasonal impact analysis for I-15 corridor.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="kb-item"
                                        onclick="askSuggestion({textContent:'Fleet T-Class truck specifications'})">
                                        <span class="material-symbols-outlined">build</span>
                                        <div>
                                            <div class="kb-title">Fleet T-Class Specs</div>
                                            <div class="kb-desc">Technical documentation for automated logistics
                                                sensors.</div>
                                        </div>
                                    </div>
                                    <div class="kb-item"
                                        onclick="askSuggestion({textContent:'Driver performance metrics for Region 4'})">
                                        <span class="material-symbols-outlined">person</span>
                                        <div>
                                            <div class="kb-title">Driver Performance Logs</div>
                                            <div class="kb-desc">Historical efficiency metrics for Region 4 drivers.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Disclaimer -->
                            <div class="ai-disclaimer">
                                <span class="material-symbols-outlined"
                                    style="font-size:14px;vertical-align:middle">info</span>
                                AI can make mistakes. Verify critical logistics decisions with a human supervisor.
                            </div>

                            <!-- System Logs -->
                            <div class="card">
                                <div class="card-header">
                                    <h3><span class="material-symbols-outlined">terminal</span> System Logs</h3>
                                </div>
                                <div style="max-height:200px;overflow-y:auto" id="system-logs">
                                    <div class="log-entry"><span class="log-time">--:--:--</span><span
                                            class="log-level success">OK</span>System initialized</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 PAGE 6: SETTINGS
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div class="page" id="page-settings">
                    <div class="settings-header">
                        <h2>System Settings</h2>
                        <p>Configure your GreenSupply AI logistics environment</p>
                    </div>

                    <div class="settings-grid">
                        <!-- AI Auto-Pilot -->
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">psychology</span> AI Auto-Pilot & Automation
                                </h3>
                            </div>
                            <div class="card-body">
                                <div class="toggle-item">
                                    <div class="toggle-label">
                                        <h4>Predictive Rerouting</h4>
                                        <p>AI automatically suggests and applies route changes based on real-time
                                            traffic.</p>
                                    </div>
                                    <div class="toggle-switch active" data-setting="predictive-rerouting"
                                        onclick="toggleSwitch(this)"></div>
                                </div>
                                <div class="toggle-item">
                                    <div class="toggle-label">
                                        <h4>Autonomous Alerts</h4>
                                        <p>Let the AI engine prioritize and escalate critical alerts to regional
                                            managers.</p>
                                    </div>
                                    <div class="toggle-switch active" data-setting="autonomous-alerts"
                                        onclick="toggleSwitch(this)"></div>
                                </div>
                                <div class="toggle-item">
                                    <div class="toggle-label">
                                        <h4>Fuel Optimization Engine</h4>
                                        <p>Enable real-time speed adjustments to maximize fuel efficiency across the
                                            fleet.</p>
                                    </div>
                                    <div class="toggle-switch" data-setting="fuel-optimization"
                                        onclick="toggleSwitch(this)"></div>
                                </div>
                            </div>
                        </div>

                        <!-- System Credentials -->
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">integration_instructions</span> System
                                    Credentials</h3>
                            </div>
                            <div class="card-body">
                                <div class="cred-group">
                                    <label>Gemini API Key</label>
                                    <input type="password" class="cred-input" id="setting-gemini-key"
                                        placeholder="Enter your Gemini API key...">
                                </div>
                                <div class="cred-group">
                                    <label>WebSocket Server URL</label>
                                    <input type="text" class="cred-input" id="setting-ws-url"
                                        value="ws://localhost:8000/ws">
                                </div>
                                <div class="cred-group">
                                    <label>Streaming Interval (seconds)</label>
                                    <input type="number" class="cred-input" id="setting-interval" value="2.5" min="1"
                                        max="10" step="0.5">
                                </div>
                                <button class="btn-save" onclick="saveSettings()">Save Credentials</button>
                            </div>
                        </div>

                        <!-- User Permissions (loaded from Firestore) -->
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">group</span> Team Members</h3>
                            </div>
                            <div class="card-body">
                                <div class="permission-list" id="team-members-list">
                                    <!-- Loaded dynamically from Firestore -->
                                    <div class="permission-item">
                                        <div class="permission-user">
                                            <div class="permission-avatar"
                                                style="background:linear-gradient(135deg,var(--accent-dim),var(--accent))">
                                                --</div>
                                            <span class="permission-name">Loading team...</span>
                                        </div>
                                        <span class="permission-role">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- System Performance -->
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="material-symbols-outlined">monitoring</span> System Performance</h3>
                            </div>
                            <div class="card-body">
                                <div class="perf-grid">
                                    <div class="perf-item">
                                        <div class="perf-value" id="perf-uptime">99.8%</div>
                                        <div class="perf-label">Uptime</div>
                                    </div>
                                    <div class="perf-item">
                                        <div class="perf-value" id="perf-latency">42ms</div>
                                        <div class="perf-label">Latency</div>
                                    </div>
                                    <div class="perf-item">
                                        <div class="perf-value" id="perf-throughput">1.2K</div>
                                        <div class="perf-label">Events/min</div>
                                    </div>
                                </div>
                                <div style="margin-top:16px">
                                    <div class="detail-metric">
                                        <span class="metric-label">CPU Usage</span>
                                        <span class="metric-value" id="perf-cpu">23%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill green" id="perf-cpu-bar" style="width:23%"></div>
                                    </div>
                                    <div class="detail-metric" style="margin-top:12px">
                                        <span class="metric-label">Memory Usage</span>
                                        <span class="metric-value" id="perf-memory">47%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill blue" id="perf-mem-bar" style="width:47%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div><!-- /page-container -->
        </div><!-- /main-content -->
    </div><!-- /app-layout -->

    <!-- Firebase & Auth Scripts -->
    <script src="firebase-init.js"></script>
    <script src="auth.js"></script>
    <script src="db.js"></script>
    <script src="script.js"></script>
</body>

</html>